---
name: Populate README.md with Github Stats

on:
    schedule:
        - cron: '0 0 * * 0' # every week
    push:
        branches:
            - main

jobs:
    run-pupulate-readme-stats:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v3
              with:
                  fetch-depth: 0

            - name: Generate README.md
              uses: teoxoy/profile-readme-stats@v1
              with:
                  token: ${{ secrets.USER_TOKEN }}
                  template: './templates/TEMPLATE.md'
                  readme: './README.md'

            - name: Update README.md
              run: |
                  if [[ "$(git status --porcelain)" != "" ]]; then
                  git config user.name github-stats-populator-bot
                  git config user.email imagnum.satellite@gmail.com
                  git add .
                  git commit -m "chore(docs): populate README.md with updated Github stats"
                  git push
                  fi
